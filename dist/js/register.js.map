{"version":3,"sources":["register.js"],"names":["$","init","eventList","on","mobile_txt","val","trim","checkPhone","mui","toast","post","mobile","res","meta","status","arrt","time","timeId","setInterval","text","clearInterval","removeAttr","console","log","code_txt","email_txt","pwd_txt","pwd2_txt","gender_txt","mobile_text","code_text","length","checkEmail","email_text","pwd_text","pwd2_text","code","email","pwd","gender","gender_text","setTimeout","location","href","phone","test","myemail","myReg"],"mappings":"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","sourcesContent":["$(function () {\r\n    /* \r\n  1 绑定 获取验证码 tap事件\r\n    1 获取手机号码 进行合法性的验证\r\n      1 不通过 给出一个用户提示 就ok\r\n  2 构造参数 发送请求到后台   成功了\r\n    1 禁用按钮   $(this).attr(\"disabled\",\"disabled\");\r\n    2 开启定时器 倒计时 60s\r\n      1 修改按钮的文字 定时的时间\r\n    3 时间到了 \r\n      1 清除定时器\r\n      2 重新启用 按钮\r\n  3 绑定注册点击事件\r\n    1 获取一坨值 表单一些值\r\n    2 挨个验证\r\n      1 不通过弹出对话框 提示\r\n    3 构造参数 发送请求到后台 完成注册\r\n      1 注册失败  手机号码已经被注册过了 弹出一个提示 \r\n    4 注册成功\r\n      1 弹出一个提示 恭喜用户 你进坑。。\r\n      2 跳转页面 登录页面\r\n   */\r\n    init();\r\n    function init() {\r\n        eventList();\r\n    }\r\n    function eventList() {\r\n        $('.get_code_btn').on('tap', function () {\r\n            let mobile_txt = $(\"input[name='mobile']\").val().trim();\r\n\r\n            if (!checkPhone(mobile_txt)) {\r\n                // 1.2 弹出一个提示\r\n                mui.toast(\"手机号码错误\");\r\n                return;\r\n            }\r\n\r\n            //  2 构造参数发送到后台\r\n            $.post(\r\n                \"http://api.pyg.ak48.xyz/api/public/v1/users/get_reg_code\",\r\n                { mobile: mobile_txt },\r\n                function (res) {\r\n                    if (res.meta.status == 200) {\r\n                        // 1 禁用按钮\r\n                        $(\".get_code_btn\").arrt(\"disabled\", \"disabled\");\r\n                        // 2 开启定时器 倒计时 60s\r\n                        // 1 修改按钮的文字 定时的时间\r\n                        let time = 5;\r\n                        let timeId = setInterval(() => {\r\n                            time--;\r\n                            $(\".get_code_btn\").text(`${time} 秒后重新发送`);\r\n                            if (time == 0) {\r\n                                clearInterval(timeId);\r\n                                $(\".get_code_btn\").removeAttr('disabled').text('获取验证码')\r\n                            }\r\n                        }, 1000);\r\n                    } else {\r\n                        console.log('获取失败')\r\n                    }\r\n                })\r\n        });\r\n        // 绑定 点击注册 的按钮 事件\r\n        $('.register_btn').on('tap', function () {\r\n            // 3.1 获取一堆值\r\n            let mobile_txt = $(\"input[name='mobile']\").val().trim();\r\n            let code_txt = $(\"input[name='code']\").val().trim();\r\n            let email_txt = $(\"input[name='email']\").val().trim();\r\n            let pwd_txt = $(\"input[name='pwd']\").val().trim();\r\n            let pwd2_txt = $(\"input[name='pwd2']\").val().trim();\r\n            let gender_txt = $(\"input[name='gender']\").val().trim();\r\n\r\n            // 3.2 按个验证\r\n            // 验证手机号码\r\n            if (!checkPhone(mobile_text)) {\r\n                //  失败\r\n                // 1.2 弹出一个提示\r\n                mui.toast(\"手机号码错误\");\r\n\r\n                return;\r\n            }\r\n            // 验证 验证码的长度 不等于  4 就是错误\r\n            if (code_text.length != 4) {\r\n                mui.toast(\"验证码不合法\");\r\n                return;\r\n            }\r\n            // 验证邮箱的合法性\r\n            if (!checkEmail(email_text)) {\r\n                mui.toast(\"邮箱不合法\");\r\n                return;\r\n            }\r\n            // 验证密码的合法性\r\n            if (pwd_text.length < 6) {\r\n                mui.toast(\"密码格式不对\");\r\n                return;\r\n            }\r\n            // 验证 重复密码\r\n            if (pwd2_text != pwd_text) {\r\n                mui.toast(\"两次密码不一致！\");\r\n                return;\r\n            }\r\n            // 3.3 构造参数 完成注册\r\n            $.post(\"http://140.143.222.79:9999/public/v1/users/reg\",\r\n                {\r\n                    mobile: mobile_text,\r\n                    code: code_text,\r\n                    email: email_text,\r\n                    pwd: pwd_text,\r\n                    gender: gender_text\r\n                },function(res){\r\n                    if(res.meta.status == 200){\r\n                        mui.toast('注册成功')\r\n                        setTimeout(()=>{\r\n                            location.href = 'login.html'\r\n                        },1000)\r\n                    }else{\r\n                        mui.toast('res.meta.msg');\r\n                    }\r\n\r\n                });\r\n        });\r\n\r\n    }\r\n\r\n    // 验证 手机合法性\r\n    function checkPhone(phone) {\r\n        if (!/^1[34578]\\d{9}$/.test(phone)) {\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n    // 验证 邮箱\r\n    function checkEmail(myemail) {\r\n        var myReg = /^[a-zA-Z0-9_-]+@([a-zA-Z0-9]+\\.)+(com|cn|net|org)$/;\r\n        if (myReg.test(myemail)) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n})"],"file":"register.js"}